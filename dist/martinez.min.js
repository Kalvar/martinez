/**
 * martinez v0.6.2
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports):typeof define==="function"&&define.amd?define(["exports"],e):e(t.martinez={})})(this,function(t){"use strict";function i(t,e){return t>e?1:t<e?-1:0}var y=function t(e,r){if(e===void 0)e=i;if(r===void 0)r=false;this._compare=e;this._root=null;this._size=0;this._noDuplicates=!!r};var e={size:{configurable:true}};y.prototype.rotateLeft=function t(e){var r=e.right;if(r){e.right=r.left;if(r.left){r.left.parent=e}r.parent=e.parent}if(!e.parent){this._root=r}else if(e===e.parent.left){e.parent.left=r}else{e.parent.right=r}if(r){r.left=e}e.parent=r};y.prototype.rotateRight=function t(e){var r=e.left;if(r){e.left=r.right;if(r.right){r.right.parent=e}r.parent=e.parent}if(!e.parent){this._root=r}else if(e===e.parent.left){e.parent.left=r}else{e.parent.right=r}if(r){r.right=e}e.parent=r};y.prototype._splay=function t(e){var r=this;while(e.parent){var i=e.parent;if(!i.parent){if(i.left===e){r.rotateRight(i)}else{r.rotateLeft(i)}}else if(i.left===e&&i.parent.left===i){r.rotateRight(i.parent);r.rotateRight(i)}else if(i.right===e&&i.parent.right===i){r.rotateLeft(i.parent);r.rotateLeft(i)}else if(i.left===e&&i.parent.right===i){r.rotateRight(i);r.rotateLeft(i)}else{r.rotateLeft(i);r.rotateRight(i)}}};y.prototype.splay=function t(e){var r=this;var i,n,o,f,a;while(e.parent){i=e.parent;n=i.parent;if(n&&n.parent){o=n.parent;if(o.left===n){o.left=e}else{o.right=e}e.parent=o}else{e.parent=null;r._root=e}f=e.left;a=e.right;if(e===i.left){if(n){if(n.left===i){if(i.right){n.left=i.right;n.left.parent=n}else{n.left=null}i.right=n;n.parent=i}else{if(f){n.right=f;f.parent=n}else{n.right=null}e.left=n;n.parent=e}}if(a){i.left=a;a.parent=i}else{i.left=null}e.right=i;i.parent=e}else{if(n){if(n.right===i){if(i.left){n.right=i.left;n.right.parent=n}else{n.right=null}i.left=n;n.parent=i}else{if(a){n.left=a;a.parent=n}else{n.left=null}e.right=n;n.parent=e}}if(f){i.right=f;f.parent=i}else{i.right=null}e.left=i;i.parent=e}}};y.prototype.replace=function t(e,r){if(!e.parent){this._root=r}else if(e===e.parent.left){e.parent.left=r}else{e.parent.right=r}if(r){r.parent=e.parent}};y.prototype.minNode=function t(e){if(e===void 0)e=this._root;if(e){while(e.left){e=e.left}}return e};y.prototype.maxNode=function t(e){if(e===void 0)e=this._root;if(e){while(e.right){e=e.right}}return e};y.prototype.insert=function t(e,r){var i=this._root;var n=null;var o=this._compare;var f;if(this._noDuplicates){while(i){n=i;f=o(i.key,e);if(f===0){return}else if(o(i.key,e)<0){i=i.right}else{i=i.left}}}else{while(i){n=i;if(o(i.key,e)<0){i=i.right}else{i=i.left}}}i={key:e,data:r,left:null,right:null,parent:n};if(!n){this._root=i}else if(o(n.key,i.key)<0){n.right=i}else{n.left=i}this.splay(i);this._size++;return i};y.prototype.find=function t(e){var r=this._root;var i=this._compare;while(r){var n=i(r.key,e);if(n<0){r=r.right}else if(n>0){r=r.left}else{return r}}return null};y.prototype.contains=function t(e){var r=this._root;var i=this._compare;while(r){var n=i(e,r.key);if(n===0){return true}else if(n<0){r=r.left}else{r=r.right}}return false};y.prototype.remove=function t(e){var r=this.find(e);if(!r){return false}this.splay(r);if(!r.left){this.replace(r,r.right)}else if(!r.right){this.replace(r,r.left)}else{var i=this.minNode(r.right);if(i.parent!==r){this.replace(i,i.right);i.right=r.right;i.right.parent=i}this.replace(r,i);i.left=r.left;i.left.parent=i}this._size--;return true};y.prototype.removeNode=function t(e){if(!e){return false}this.splay(e);if(!e.left){this.replace(e,e.right)}else if(!e.right){this.replace(e,e.left)}else{var r=this.minNode(e.right);if(r.parent!==e){this.replace(r,r.right);r.right=e.right;r.right.parent=r}this.replace(e,r);r.left=e.left;r.left.parent=r}this._size--;return true};y.prototype.erase=function t(e){var r=this.find(e);if(!r){return}this.splay(r);var i=r.left;var n=r.right;var o=null;if(i){i.parent=null;o=this.maxNode(i);this.splay(o);this._root=o}if(n){if(i){o.right=n}else{this._root=n}n.parent=o}this._size--};y.prototype.pop=function t(){var e=this._root,r=null;if(e){while(e.left){e=e.left}r={key:e.key,data:e.data};this.remove(e.key)}return r};y.prototype.next=function t(e){var r=e;if(r){if(r.right){r=r.right;while(r&&r.left){r=r.left}}else{r=e.parent;while(r&&r.right===e){e=r;r=r.parent}}}return r};y.prototype.prev=function t(e){var r=e;if(r){if(r.left){r=r.left;while(r&&r.right){r=r.right}}else{r=e.parent;while(r&&r.left===e){e=r;r=r.parent}}}return r};y.prototype.forEach=function t(e){var r=this._root;var i=[],n=false,o=0;while(!n){if(r){i.push(r);r=r.left}else{if(i.length>0){r=i.pop();e(r,o++);r=r.right}else{n=true}}}return this};y.prototype.range=function t(e,r,i,n){var o=this;var f=[];var a=this._compare;var l=this._root,u;while(f.length!==0||l){if(l){f.push(l);l=l.left}else{l=f.pop();u=a(l.key,r);if(u>0){break}else if(a(l.key,e)>=0){if(i.call(n,l)){return o}}l=l.right}}return this};y.prototype.keys=function t(){var e=this._root;var r=[],i=[],n=false;while(!n){if(e){r.push(e);e=e.left}else{if(r.length>0){e=r.pop();i.push(e.key);e=e.right}else{n=true}}}return i};y.prototype.values=function t(){var e=this._root;var r=[],i=[],n=false;while(!n){if(e){r.push(e);e=e.left}else{if(r.length>0){e=r.pop();i.push(e.data);e=e.right}else{n=true}}}return i};y.prototype.at=function t(e){var r=this._root;var i=[],n=false,o=0;while(!n){if(r){i.push(r);r=r.left}else{if(i.length>0){r=i.pop();if(o===e){return r}o++;r=r.right}else{n=true}}}return null};y.prototype.load=function t(e,r,i){if(e===void 0)e=[];if(r===void 0)r=[];if(i===void 0)i=false;if(this._size!==0){throw new Error("bulk-load: tree is not empty")}var n=e.length;if(i){u(e,r,0,n-1,this._compare)}this._root=s(null,e,r,0,n);this._size=n;return this};y.prototype.min=function t(){var e=this.minNode(this._root);if(e){return e.key}else{return null}};y.prototype.max=function t(){var e=this.maxNode(this._root);if(e){return e.key}else{return null}};y.prototype.isEmpty=function t(){return this._root===null};e.size.get=function(){return this._size};y.createTree=function t(e,r,i,n,o){return new y(i,o).load(e,r,n)};Object.defineProperties(y.prototype,e);function s(t,e,r,i,n){var o=n-i;if(o>0){var f=i+Math.floor(o/2);var a=e[f];var l=r[f];var u={key:a,data:l,parent:t};u.left=s(u,e,r,i,f);u.right=s(u,e,r,f+1,n);return u}return null}function u(t,e,r,i,n){if(r>=i){return}var o=t[r+i>>1];var f=r-1;var a=i+1;while(true){do{f++}while(n(t[f],o)<0);do{a--}while(n(t[a],o)>0);if(f>=a){break}var l=t[f];t[f]=t[a];t[a]=l;l=e[f];e[f]=e[a];e[a]=l}u(t,e,r,a,n);u(t,e,a+1,i,n)}var f=0;var l=1;var h=2;var p=3;var d=0;var a=1;var E=2;var v=3;function w(t,e,r){if(e===null){t.inOut=false;t.otherInOut=true}else{if(t.isSubject===e.isSubject){t.inOut=!e.inOut;t.otherInOut=e.otherInOut}else{t.inOut=!e.otherInOut;t.otherInOut=e.isVertical()?!e.inOut:e.inOut}if(e){t.prevInResult=!n(e,r)||e.isVertical()?e.prevInResult:e}}t.inResult=n(t,r)}function n(t,e){switch(t.type){case f:switch(e){case d:return!t.otherInOut;case a:return t.otherInOut;case E:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case v:return true}break;case h:return e===d||e===a;case p:return e===E;case l:return false}return false}var c=function t(e,r,i,n,o){this.left=r;this.point=e;this.otherEvent=i;this.isSubject=n;this.type=o||f;this.inOut=false;this.otherInOut=false;this.prevInResult=null;this.inResult=false;this.resultInOut=false;this.isExteriorRing=true};c.prototype.isBelow=function t(e){var r=this.point,i=this.otherEvent.point;return this.left?(r[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(r[1]-e[1])>0:(i[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(i[1]-e[1])>0};c.prototype.isAbove=function t(e){return!this.isBelow(e)};c.prototype.isVertical=function t(){return this.point[0]===this.otherEvent.point[0]};c.prototype.clone=function t(){var e=new c(this.point,this.left,this.otherEvent,this.isSubject,this.type);e.inResult=this.inResult;e.prevInResult=this.prevInResult;e.isExteriorRing=this.isExteriorRing;e.inOut=this.inOut;e.otherInOut=this.otherInOut;return e};function g(t,e){if(t[0]===e[0]){if(t[1]===e[1]){return true}else{return false}}return false}var r=11102230246251565e-32;var B=134217729;var C=(3+8*r)*r;function A(t,e,r,i,n){var o,f,a,l;var u=e[0];var s=i[0];var h=0;var p=0;if(s>u===s>-u){o=u;u=e[++h]}else{o=s;s=i[++p]}var v=0;if(h<t&&p<r){if(s>u===s>-u){f=u+o;a=o-(f-u);u=e[++h]}else{f=s+o;a=o-(f-s);s=i[++p]}o=f;if(a!==0){n[v++]=a}while(h<t&&p<r){if(s>u===s>-u){f=o+u;l=f-o;a=o-(f-l)+(u-l);u=e[++h]}else{f=o+s;l=f-o;a=o-(f-l)+(s-l);s=i[++p]}o=f;if(a!==0){n[v++]=a}}}while(h<t){f=o+u;l=f-o;a=o-(f-l)+(u-l);u=e[++h];o=f;if(a!==0){n[v++]=a}}while(p<r){f=o+s;l=f-o;a=o-(f-l)+(s-l);s=i[++p];o=f;if(a!==0){n[v++]=a}}if(o!==0||v===0){n[v++]=o}return v}function D(t,e){var r=e[0];for(var i=1;i<t;i++){r+=e[i]}return r}function o(t){return new Float64Array(t)}var I=(3+16*r)*r;var F=(2+12*r)*r;var T=(9+64*r)*r*r;var V=o(4);var P=o(8);var U=o(12);var X=o(16);var q=o(4);function _(t,e,r,i,n,o,f){var a,l,u,s;var h,p,v,c,g,y,d,E,w,I,_,m,b,k;var O=t-n;var R=r-n;var x=e-o;var j=i-o;I=O*j;p=B*O;v=p-(p-O);c=O-v;p=B*j;g=p-(p-j);y=j-g;_=c*y-(I-v*g-c*g-v*y);m=x*R;p=B*x;v=p-(p-x);c=x-v;p=B*R;g=p-(p-R);y=R-g;b=c*y-(m-v*g-c*g-v*y);d=_-b;h=_-d;V[0]=_-(d+h)+(h-b);E=I+d;h=E-I;w=I-(E-h)+(d-h);d=w-m;h=w-d;V[1]=w-(d+h)+(h-m);k=E+d;h=k-E;V[2]=E-(k-h)+(d-h);V[3]=k;var S=D(4,V);var N=F*f;if(S>=N||-S>=N){return S}h=t-O;a=t-(O+h)+(h-n);h=r-R;u=r-(R+h)+(h-n);h=e-x;l=e-(x+h)+(h-o);h=i-j;s=i-(j+h)+(h-o);if(a===0&&l===0&&u===0&&s===0){return S}N=T*f+C*Math.abs(S);S+=O*s+j*a-(x*u+R*l);if(S>=N||-S>=N){return S}I=a*j;p=B*a;v=p-(p-a);c=a-v;p=B*j;g=p-(p-j);y=j-g;_=c*y-(I-v*g-c*g-v*y);m=l*R;p=B*l;v=p-(p-l);c=l-v;p=B*R;g=p-(p-R);y=R-g;b=c*y-(m-v*g-c*g-v*y);d=_-b;h=_-d;q[0]=_-(d+h)+(h-b);E=I+d;h=E-I;w=I-(E-h)+(d-h);d=w-m;h=w-d;q[1]=w-(d+h)+(h-m);k=E+d;h=k-E;q[2]=E-(k-h)+(d-h);q[3]=k;var z=A(4,V,4,q,P);I=O*s;p=B*O;v=p-(p-O);c=O-v;p=B*s;g=p-(p-s);y=s-g;_=c*y-(I-v*g-c*g-v*y);m=x*u;p=B*x;v=p-(p-x);c=x-v;p=B*u;g=p-(p-u);y=u-g;b=c*y-(m-v*g-c*g-v*y);d=_-b;h=_-d;q[0]=_-(d+h)+(h-b);E=I+d;h=E-I;w=I-(E-h)+(d-h);d=w-m;h=w-d;q[1]=w-(d+h)+(h-m);k=E+d;h=k-E;q[2]=E-(k-h)+(d-h);q[3]=k;var M=A(z,P,4,q,U);I=a*s;p=B*a;v=p-(p-a);c=a-v;p=B*s;g=p-(p-s);y=s-g;_=c*y-(I-v*g-c*g-v*y);m=l*u;p=B*l;v=p-(p-l);c=l-v;p=B*u;g=p-(p-u);y=u-g;b=c*y-(m-v*g-c*g-v*y);d=_-b;h=_-d;q[0]=_-(d+h)+(h-b);E=I+d;h=E-I;w=I-(E-h)+(d-h);d=w-m;h=w-d;q[1]=w-(d+h)+(h-m);k=E+d;h=k-E;q[2]=E-(k-h)+(d-h);q[3]=k;var L=A(M,U,4,q,X);return X[L-1]}function m(t,e,r,i,n,o){var f=(e-o)*(r-n);var a=(t-n)*(i-o);var l=f-a;if(f===0||a===0||f>0!==a>0){return l}var u=Math.abs(f+a);if(Math.abs(l)>=I*u){return l}return-_(t,e,r,i,n,o,u)}function b(t,e,r){var i=m(t[0],t[1],e[0],e[1],r[0],r[1]);if(i>0){return-1}if(i<0){return 1}return 0}function k(t,e){var r=t.point;var i=e.point;if(r[0]>i[0]){return 1}if(r[0]<i[0]){return-1}if(r[1]!==i[1]){return r[1]>i[1]?1:-1}return O(t,e,r,i)}function O(t,e,r,i){if(t.left!==e.left){return t.left?1:-1}if(b(r,t.otherEvent.point,e.otherEvent.point)!==0){return!t.isBelow(e.otherEvent.point)?1:-1}return!t.isSubject&&e.isSubject?1:-1}function R(t,e,r){var i=new c(e,false,t,t.isSubject);var n=new c(e,true,t.otherEvent,t.isSubject);if(g(t.point,t.otherEvent.point)){console.warn("what is that, a collapsed segment?",t)}i.contourId=n.contourId=t.contourId;if(k(n,t.otherEvent)>0){t.otherEvent.left=true;n.left=false}t.otherEvent.otherEvent=n;t.otherEvent=i;r.push(n);r.push(i);return r}function x(t,e){return t[0]*e[1]-t[1]*e[0]}function j(t,e){return t[0]*e[0]+t[1]*e[1]}function S(t,e,r,i,n){var o=[e[0]-t[0],e[1]-t[1]];var f=[i[0]-r[0],i[1]-r[1]];function a(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var l=[r[0]-t[0],r[1]-t[1]];var u=x(o,f);var s=u*u;var h=j(o,o);if(s>0){var p=x(l,f)/u;if(p<0||p>1){return null}var v=x(l,o)/u;if(v<0||v>1){return null}if(p===0||p===1){return n?null:[a(t,p,o)]}if(v===0||v===1){return n?null:[a(r,v,f)]}return[a(t,p,o)]}u=x(l,o);s=u*u;if(s>0){return null}var c=j(o,l)/h;var g=c+j(o,f)/h;var y=Math.min(c,g);var d=Math.max(c,g);if(y<=1&&d>=0){if(y===1){return n?null:[a(t,y>0?y:0,o)]}if(d===0){return n?null:[a(t,d<1?d:1,o)]}if(n&&y===0&&d===1){return null}return[a(t,y>0?y:0,o),a(t,d<1?d:1,o)]}return null}function N(t,e,r){var i=S(t.point,t.otherEvent.point,e.point,e.otherEvent.point);var n=i?i.length:0;if(n===0){return 0}if(n===1&&(g(t.point,e.point)||g(t.otherEvent.point,e.otherEvent.point))){return 0}if(n===2&&t.isSubject===e.isSubject){return 0}if(n===1){if(!g(t.point,i[0])&&!g(t.otherEvent.point,i[0])){R(t,i[0],r)}if(!g(e.point,i[0])&&!g(e.otherEvent.point,i[0])){R(e,i[0],r)}return 1}var o=[];var f=false;var a=false;if(g(t.point,e.point)){f=true}else if(k(t,e)===1){o.push(e,t)}else{o.push(t,e)}if(g(t.otherEvent.point,e.otherEvent.point)){a=true}else if(k(t.otherEvent,e.otherEvent)===1){o.push(e.otherEvent,t.otherEvent)}else{o.push(t.otherEvent,e.otherEvent)}if(f&&a||f){e.type=l;t.type=e.inOut===t.inOut?h:p;if(f&&!a){R(o[1].otherEvent,o[0].point,r)}return 2}if(a){R(o[0],o[1].point,r);return 3}if(o[0]!==o[3].otherEvent){R(o[0],o[1].point,r);R(o[1],o[2].point,r);return 3}R(o[0],o[1].point,r);R(o[3].otherEvent,o[2].point,r);return 3}function z(t,e){if(t===e){return 0}if(b(t.point,t.otherEvent.point,e.point)!==0||b(t.point,t.otherEvent.point,e.otherEvent.point)!==0){if(g(t.point,e.point)){return t.isBelow(e.otherEvent.point)?-1:1}if(t.point[0]===e.point[0]){return t.point[1]<e.point[1]?-1:1}if(k(t,e)===1){return e.isAbove(t.point)?-1:1}return t.isBelow(e.point)?-1:1}if(t.isSubject===e.isSubject){var r=t.point,i=e.point;if(r[0]===i[0]&&r[1]===i[1]){r=t.otherEvent.point;i=e.otherEvent.point;if(r[0]===i[0]&&r[1]===i[1]){return 0}else{return t.contourId>e.contourId?1:-1}}}else{return t.isSubject?-1:1}return k(t,e)===1?1:-1}function M(t,e,r,i,n,o){var f=new y(z);var a=[];var l=Math.min(i[2],n[2]);var u,s,h;while(t.length!==0){var p=t.pop();a.push(p);if(o===d&&p.point[0]>l||o===E&&p.point[0]>i[2]){break}if(p.left){s=u=f.insert(p);h=f.minNode();if(u!==h){u=f.prev(u)}else{u=null}s=f.next(s);var v=u?u.key:null;var c=void 0;w(p,v,o);if(s){if(N(p,s.key,t)===2){w(p,v,o);w(p,s.key,o)}}if(u){if(N(u.key,p,t)===2){var g=u;if(g!==h){g=f.prev(g)}else{g=null}c=g?g.key:null;w(v,c,o);w(p,v,o)}}}else{p=p.otherEvent;s=u=f.find(p);if(u&&s){if(u!==h){u=f.prev(u)}else{u=null}s=f.next(s);f.remove(p);if(s&&u){N(u.key,s.key,t)}}}}return a}var L=function t(){this.points=[];this.holes=[];this.external=true;this.precomputedCC=false};function G(t){var e,r,i,n;var o=[];for(r=0,i=t.length;r<i;r++){e=t[r];if(e.left&&e.inResult||!e.left&&e.otherEvent.inResult){o.push(e)}}var f=false;while(!f){f=true;for(r=0,i=o.length;r<i;r++){if(r+1<i&&k(o[r],o[r+1])===1){n=o[r];o[r]=o[r+1];o[r+1]=n;f=false}}}for(r=0,i=o.length;r<i;r++){e=o[r];e.pos=r}for(r=0,i=o.length;r<i;r++){e=o[r];if(!e.left){n=e.pos;e.pos=e.otherEvent.pos;e.otherEvent.pos=n}}return o}function H(t,e,r){var i=t+1,n=e[t].point,o;var f=e.length;if(i<f){o=e[i].point}while(i<f&&o[0]===n[0]&&o[1]===n[1]){if(!r[i]){return i}else{i++}o=e[i].point}i=t-1;while(r[i]){i--}return i}function J(t){var e,r;var i=G(t);var n={};var o=[];var f;var a=[];var l=[];for(e=0,r=i.length;e<r;e++){if(n[e]){continue}var u=new L;o.push(u);var s=o.length-1;a.push(0);l.push(-1);if(i[e].prevInResult){var h=i[e].prevInResult.contourId;if(!i[e].prevInResult.resultInOut){o[h].holes.push(s);l[s]=h;a[s]=a[h]+1;u.external=false}else if(!o[h].external){o[l[h]].holes.push(s);l[s]=l[h];a[s]=a[h];u.external=false}}var p=e;var v=i[e].point;u.points.push(v);while(i[p]&&i[p].otherEvent.point!==v){f=i[p];n[p]=true;if(f.left){f.resultInOut=false;f.contourId=s}else{f.otherEvent.resultInOut=true;f.otherEvent.contourId=s}p=f.pos;n[p]=true;u.points.push(i[p].point);p=H(p,i,n)}p=p===-1?e:p;f=i[p];n[p]=n[f.pos]=true;f.otherEvent.resultInOut=true;f.otherEvent.contourId=s;u.points.push(u.points[0])}return o}var K=W;var Q=W;function W(t,e){var r=this;if(!(this instanceof W)){return new W(t,e)}this.data=t||[];this.length=this.data.length;this.compare=e||Y;if(this.length>0){for(var i=(this.length>>1)-1;i>=0;i--){r._down(i)}}}function Y(t,e){return t<e?-1:t>e?1:0}W.prototype={push:function(t){this.data.push(t);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0){return undefined}var t=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this._down(0)}this.data.pop();return t},peek:function(){return this.data[0]},_up:function(t){var e=this.data;var r=this.compare;var i=e[t];while(t>0){var n=t-1>>1;var o=e[n];if(r(i,o)>=0){break}e[t]=o;t=n}e[t]=i},_down:function(t){var e=this;var r=this.data;var i=this.compare;var n=this.length>>1;var o=r[t];while(t<n){var f=(t<<1)+1;var a=f+1;var l=r[f];if(a<e.length&&i(r[a],l)<0){f=a;l=r[a]}if(i(l,o)>=0){break}r[t]=l;t=f}r[t]=o}};K.default=Q;var Z=Math.max;var $=Math.min;var tt=0;function et(t,e,r,i,n,o){var f,a,l,u,s,h;for(f=0,a=t.length-1;f<a;f++){l=t[f];u=t[f+1];s=new c(l,false,undefined,e);h=new c(u,false,s,e);s.otherEvent=h;if(l[0]===u[0]&&l[1]===u[1]){continue}s.contourId=h.contourId=r;if(!o){s.isExteriorRing=false;h.isExteriorRing=false}if(k(s,h)>0){h.left=true}else{s.left=true}var p=l[0],v=l[1];n[0]=$(n[0],p);n[1]=$(n[1],v);n[2]=Z(n[2],p);n[3]=Z(n[3],v);i.push(s);i.push(h)}}function rt(t,e,r,i,n){var o=new K(null,k);var f,a,l,u,s,h;for(l=0,u=t.length;l<u;l++){f=t[l];for(s=0,h=f.length;s<h;s++){a=s===0;if(a){tt++}et(f[s],true,tt,o,r,a)}}for(l=0,u=e.length;l<u;l++){f=e[l];for(s=0,h=f.length;s<h;s++){a=s===0;if(n===E){a=false}if(a){tt++}et(f[s],false,tt,o,i,a)}}return o}var it=[];function nt(t,e,r){var i=null;if(t.length*e.length===0){if(r===d){i=it}else if(r===E){i=t}else if(r===a||r===v){i=t.length===0?e:t}}return i}function ot(t,e,r,i,n){var o=null;if(r[0]>i[2]||i[0]>r[2]||r[1]>i[3]||i[1]>r[3]){if(n===d){o=it}else if(n===E){o=t}else if(n===a||n===v){o=t.concat(e)}}return o}function ft(t,e,r){if(typeof t[0][0][0]==="number"){t=[t]}if(typeof e[0][0][0]==="number"){e=[e]}var i=nt(t,e,r);if(i){return i===it?null:i}var n=[Infinity,Infinity,-Infinity,-Infinity];var o=[Infinity,Infinity,-Infinity,-Infinity];var f=rt(t,e,n,o,r);i=ot(t,e,n,o,r);if(i){return i===it?null:i}var a=M(f,t,e,n,o,r);var l=J(a,r);var u=[];for(var s=0;s<l.length;s++){var h=l[s];if(h.external){var p=[h.points];for(var v=0;v<h.holes.length;v++){h.holes[v];p.push(l[h.holes[v]].points)}u.push(p)}}return u}function at(t,e){return ft(t,e,a)}function lt(t,e){return ft(t,e,E)}function ut(t,e){return ft(t,e,v)}function st(t,e){return ft(t,e,d)}var ht={UNION:a,DIFFERENCE:E,INTERSECTION:d,XOR:v};t.union=at;t.diff=lt;t.xor=ut;t.intersection=st;t.operations=ht;Object.defineProperty(t,"__esModule",{value:true})});
